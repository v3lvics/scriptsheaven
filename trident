local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
	Name = "cigan-hub",
	Icon = 0, -- Icon in Topbar. Can use Lucide Icons (string) or Roblox Image (number). 0 to use no icon (default).
	LoadingTitle = "vyčkejte, negři vybíhají",
	LoadingSubtitle = "od lvl 100 boss.",
	Theme = "AmberGlow", -- Check https://docs.sirius.menu/rayfield/configuration/themes

	DisableRayfieldPrompts = false,
	DisableBuildWarnings = false, -- Prevents Rayfield from warning when the script has a version mismatch with the interface

	ConfigurationSaving = {
		Enabled = true,
		FolderName = nil, -- Create a custom folder for your hub/game
		FileName = "ciganhub"
	},

	Discord = {
		Enabled = false, -- Prompt the user to join your Discord server if their executor supports it
		Invite = "noinvitelink", -- The Discord invite code, do not include discord.gg/. E.g. discord.gg/ ABCD would be ABCD
		RememberJoins = true -- Set this to false to make them join the discord every time they load it up
	},

	KeySystem = true, -- Set this to true to use our key system
	KeySettings = {
		Title = "Nigger",
		Subtitle = "Londýnské ověření",
		Note = "Heslo fakt nedostaneš, jsi moc černý.", -- Use this to tell the user how to get a key
		FileName = "Key", -- It is recommended to use something unique as other scripts using Rayfield may overwrite your key file
		SaveKey = false, -- The user's key will be saved, but if you change the key, they will be unable to use your script
		GrabKeyFromSite = false, -- If this is true, set Key below to the RAW site you would like Rayfield to get the key from
		Key = {"striletcerny"} -- List of keys that will be accepted by the system, can be RAW file links (pastebin, github etc) or simple strings ("hello","key22")
	}
})

Rayfield:Notify({
	Title = "cigan-hub",
	Content = "příprava šéfe...",
	Duration = 3.35,
	Image = "loader",
})
local before = tonumber(game.Workspace.CurrentCamera.FieldOfView)
wait(2)

local nevidimcigany = Window:CreateTab("Nevidim cigany", "home") -- Title, Image
local Toggle = nevidimcigany:CreateToggle({
	Name = "ESP",
	CurrentValue = false,
	Flag = "esp", -- A flag is the identifier for the configuration file, make sure every element has a different flag if you're using configuration saving to ensure no overlaps
	Callback = function(Value)
		for i,v in pairs(game.Workspace:GetChildren()) do
			if v:FindFirstChild("Head") then
				if v.Head:FindFirstChild("ESP") then
					v.Head.ESP.Enabled = Value
					v.Head.ESP.tag.Text = "Cigan"
					v.Head.ESP.tag.TextColor3 = Color3.fromRGB(255, 0, 4)
				else
					local newesp = Instance.new("BillboardGui")
					newesp.Name = "ESP"
					newesp.Parent = v.Head
					newesp.MaxDistance = 9999999
					newesp.AlwaysOnTop = true
					newesp.ExtentsOffsetWorldSpace = Vector3.new(0, 1.25, 0)
					newesp.Size = UDim2.new(0, 300, 0, 15)
					local tag = Instance.new("TextLabel")
					tag.Name = "tag"
					tag.Parent = newesp
					tag.Size = UDim2.new(1,0,1,0)
					tag.TextColor3 = Color3.fromRGB(255, 0, 4)
				end
			end
			for i,a in pairs(v:GetChildren()) do
				local s,f = pcall(function()
					local selectionboxc=  Instance.new("SelectionBox")
					selectionboxc.Color3 = Color3.fromRGB(255, 0, 0)
					selectionboxc.Adornee = a
					a.Mateial = "Neon"
				end)
			end
		end
		if Value == true then
			Rayfield:Notify({
				Title = "cigan-hub",
				Content = "ted vidis nacteny cigany. Novy se automaticky pridaj.",
				Duration = 3,
				Image = "loader",
			})
		else
			Rayfield:Notify({
				Title = "cigan-hub",
				Content = "cerny uz nevidis, hodne stesti.",
				Duration = 2,
				Image = "loader",
			})
		end
		game.Players.PlayerAdded:Connect(function()
			wait(15)
			for i,v in pairs(game.Workspace:GetChildren()) do
				if v:FindFirstChild("Head") then
					if v.Head:FindFirstChild("ESP") then
						v.Head.ESP.Enabled = Value
						v.Head.ESP.tag.Text = "Cigan"
						v.Head.ESP.tag.TextColor3 = Color3.fromRGB(255, 0, 4)
					else
						local newesp = Instance.new("BillboardGui")
						newesp.Name = "ESP"
						newesp.Parent = v.Head
						newesp.MaxDistance = 9999999
						newesp.AlwaysOnTop = true
						newesp.ExtentsOffsetWorldSpace = Vector3.new(0, 1.25, 0)
						newesp.Size = UDim2.new(0, 300, 0, 15)
						local tag = Instance.new("TextLabel")
						tag.Name = "tag"
						tag.Parent = newesp
						tag.Size = UDim2.new(1,0,1,0)
						tag.TextColor3 = Color3.fromRGB(255, 0, 4)
					end
				end
			end
		end)
	end,
})
local totemenabled = false
local Toggle = nevidimcigany:CreateToggle({
	Name = "Visible Totems",
	CurrentValue = false,
	Flag = "totem", -- A flag is the identifier for the configuration file, make sure every element has a different flag if you're using configuration saving to ensure no overlaps
	Callback = function(Value)
		totemenabled =Value
		if totemenabled == true then
			for i,v in pairs(workspace:GetChildren()) do
				if v:IsA("Model") then
					if v:FindFirstChild("Body") and v:FindFirstChild("State") and v:FindFirstChild("Base") then
						for i,a in pairs(v:GetChildren()) do

						end
						if v.Body:FindFirstChild("totemesp") then
							v.Body.totemesp.Enabled = totemenabled
							v.Body.totemesp.tag.Text = "TOTEM"
							v.Body.totemesp.tag.TextColor3 = Color3.fromRGB(255, 0, 4)

						else
							local newesp = Instance.new("BillboardGui")
							newesp.Name = "totemesp"
							newesp.Parent =  v.Body
							newesp.MaxDistance = 9999999
							newesp.AlwaysOnTop = true
							newesp.ExtentsOffsetWorldSpace = Vector3.new(0, 1.25, 0)
							newesp.Size = UDim2.new(0, 300, 0, 15)
							local ta = Instance.new("TextLabel")
							ta.Text = "TOTEM"
							ta.Name = "tag"
							ta.BackgroundTransparency = 1
							ta.Parent = newesp
							ta.Size = UDim2.new(1,0,1,0)
							ta.TextColor3 = Color3.fromRGB(255, 0, 4)
						end
					end
				end
			end
		end
		
	end,
})

local Toggle = nevidimcigany:CreateToggle({
	Name = "Better FOV",
	CurrentValue = false,
	Flag = "fov", -- A flag is the identifier for the configuration file, make sure every element has a different flag if you're using configuration saving to ensure no overlaps
	Callback = function(Value)
		if Value == true then
			game:GetService("UserInputService").InputBegan:Connect(function(key)
				if key.KeyCode == Enum.KeyCode.V then
					wait(.4)
					local tween = game:GetService("TweenService")
					tween:Create(game.Workspace.CurrentCamera, TweenInfo.new(1),{FieldOfView = 160}):Play()
				end
			end)
			game:GetService("UserInputService").InputEnded:Connect(function(key)
				if key.KeyCode == Enum.KeyCode.V then
					wait(.4)
					local tween = game:GetService("TweenService")
					tween:Create(game.Workspace.CurrentCamera, TweenInfo.new(1),{FieldOfView = before}):Play()
				end
			end)
		end
		if Value == true then
			game.Workspace.CurrentCamera.FieldOfView = 120
		else
			game.Workspace.CurrentCamera.FieldOfView = before
		end
	end,
})
local HV 
local Slider = nevidimcigany:CreateSlider({
	Name = "Bigger Hitbox",
	Range = {1, 5.5},
	Increment = .5,
	Suffix = "Size",
	CurrentValue = 1,
	Flag = "bighitbox", -- A flag is the identifier for the configuration file, make sure every element has a different flag if you're using configuration saving to ensure no overlaps
	Callback = function(Value)
		hv = Vector3.new(Value,Value,Value)
		for i,v in pairs(game.Workspace:GetChildren()) do
			if v:IsA("Model") then
				if v:FindFirstChild("Head") then
					v.Head.Size = Vector3.new(Value,Value,Value)
					v.Head.CanCollide=  false
				end
			end
		end
		
	end,
})
local stmd = false
game.Workspace.ChildAdded:Connect(function(part)
	if part:IsA("Sound") and stmd == true then
		Rayfield:Notify({
			Title = "Stealth mode",
			Content = "zvuk se ozval "..part.Name,
			Duration = 2,
			Image = "triangle-alert",
		})
	end
end)
local Toggle = nevidimcigany:CreateToggle({
	Name = "Stealth mode",
	CurrentValue = false,
	Flag = "warnsound", -- A flag is the identifier for the configuration file, make sure every element has a different flag if you're using configuration saving to ensure no overlaps
	Callback = function(Value)
		stmd = Value
	end,
})


game.Workspace.ChildAdded:Connect(function()
	if totemenabled == true then
		for i,v in pairs(workspace:GetChildren()) do
			if v:IsA("Model") then
				if v:FindFirstChild("Body") and v:FindFirstChild("State") and v:FindFirstChild("Base") then
					for i,a in pairs(v:GetChildren()) do

					end
					if v.Body:FindFirstChild("totemesp") then
						v.Body.totemesp.Enabled = totemenabled
						v.Body.totemesp.tag.Text = "TOTEM"
						v.Body.totemesp.tag.TextColor3 = Color3.fromRGB(255, 0, 4)

					else
						local newesp = Instance.new("BillboardGui")
						newesp.Name = "totemesp"
						newesp.Parent =  v.Body
						newesp.MaxDistance = 9999999
						newesp.AlwaysOnTop = true
						newesp.ExtentsOffsetWorldSpace = Vector3.new(0, 1.25, 0)
						newesp.Size = UDim2.new(0, 300, 0, 15)
						local ta = Instance.new("TextLabel")
						ta.Text = "TOTEM"
						ta.Name = "tag"
						ta.BackgroundTransparency = 1
						ta.Parent = newesp
						ta.Size = UDim2.new(1,0,1,0)
						ta.TextColor3 = Color3.fromRGB(255, 0, 4)
					end
				end
			end
		end
	end
end)

game.Players.PlayerAdded:Connect(function()
	wait(10)
	for i,v in pairs(game.Workspace:GetChildren()) do
		if v:IsA("Model") then
			if v:FindFirstChild("Head") then
				v.Head.Size = Vector3.new(hv,hv,hv)
			end
		end
	end
end)

local Area = game:GetService("Workspace")
local RunService = game:GetService("RunService")
local UIS = game:GetService("UserInputService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local Mouse = LocalPlayer:GetMouse()
local MyView = Area.CurrentCamera
local HoldingM2 = false
local Active = false
local Lock = false
local Epitaph = 0.015 ---Note: The Bigger The Number, The More Prediction.
local HeadOffset = Vector3.new(0, .1, 0)
local locked = false
local sound = Instance.new("Sound")
local onsound = Instance.new("Sound")
local offsound = Instance.new("Sound")
onsound.SoundId = "rbxassetid://18755588842"
offsound.SoundId = "rbxassetid://7550852988"
onsound.Parent = game.SoundService
offsound.Parent = game.SoundService
sound.SoundId = "rbxassetid://15675085146"
_G.TeamCheck = false
_G.AimPart = "Head"
_G.Sensitivity = 0
_G.CircleSides = 65
_G.CircleColor = Color3.fromRGB(0, 132, 255)
_G.CircleTransparency = 100
_G.CircleRadius = 135
_G.CircleFilled = false
_G.CircleVisible = true
_G.CircleThickness = 1

local FOVCircle = Drawing.new("Circle")
FOVCircle.Position = Vector2.new(MyView.ViewportSize.X / 2, MyView.ViewportSize.Y / 2)
FOVCircle.Radius = _G.CircleRadius
FOVCircle.Filled = _G.CircleFilled
FOVCircle.Color = _G.CircleColor
FOVCircle.Visible = _G.CircleVisible
FOVCircle.Transparency = _G.CircleTransparency
FOVCircle.NumSides = _G.CircleSides
FOVCircle.Thickness = _G.CircleThickness

local function CursorLock()
	UIS.MouseBehavior = Enum.MouseBehavior.LockCenter
end
local function UnLockCursor()
	HoldingM2 = false Active = false Lock = false 
	UIS.MouseBehavior = Enum.MouseBehavior.Default
end
function FindNearestPlayer()
	local dist = math.huge
	local Target = nil
	for _, v in pairs(workspace:GetChildren()) do
		if v ~= LocalPlayer and v.Name ~= "LocalCharacter" and v:FindFirstChild("HumanoidRootPart") and v and v:FindFirstChild("LowerTorso") then
			local TheirCharacter = v.HumanoidRootPart
			local CharacterRoot, Visible = MyView:WorldToViewportPoint(v[_G.AimPart].Position)
			if Visible then
				local RealMag = (Vector2.new(Mouse.X, Mouse.Y) - Vector2.new(CharacterRoot.X, CharacterRoot.Y)).Magnitude
				if RealMag < dist and RealMag < FOVCircle.Radius then
					dist = RealMag
					Target = TheirCharacter
				end
			end
		end
	end
	return Target
end


UIS.InputBegan:Connect(function(bind)
	if bind.KeyCode == Enum.KeyCode.B then
		if locked == false then
			locked = true
			HoldingM2 = true
			Active = true
			Lock = true
			if Active then
				local The_Enemy = FindNearestPlayer()
				while HoldingM2 do task.wait(.000001)
					if Lock and The_Enemy ~= nil then
						local Future = The_Enemy.HumanoidRootPart.CFrame + (The_Enemy.HumanoidRootPart.Velocity * Epitaph + HeadOffset)
						MyView.CFrame = CFrame.lookAt(MyView.CFrame.Position, Future.Position)
						CursorLock()
					end
				end
			end
		else
			UnLockCursor()
			locked = false
		end
	end
end)

sound.Parent = game.SoundService
sound:Play()
